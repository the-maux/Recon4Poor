name: Update image dependency

on:
  push:
    branches:
      - develop

jobs:
  Scanning:

    runs-on: ubuntu-latest
    steps:
    - if: startsWith(github.event.head_commit.message, 'PUSH')
#    - uses: actions/checkout@v1 # No need source, will be updated on docker run with volumes

    - name: Update Docker image
      run: |
        echo "${{ secrets.SVC_TOKEN }}" | sudo docker login ghcr.io --username the-maux --password-stdin
        docker build -t --label "org.opencontainers.image.source=https://github.com/the-maux/Recon4Poor" ghcr.io/the-maux/recoon4poor:0.0.1 .
        docker push ghcr.io/the-maux/recoon4poor:0.0.1
